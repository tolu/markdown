# wsl

arkitektur
 - translation layer implemented as a driver
 - plan 9 https://en.wikipedia.org/wiki/9P_(protocol)
 - hur kan git vara snabbare i virtualisering 채n i windows???
 - Windows NT Kernel https://en.wikipedia.org/wiki/Architecture_of_Windows_NT
 
### Features
 - wsl.exe
 - `/etc/wsl.conf`
 - linux apps
 - shared localhost
 - etc
 - `lsb_release -a`
 - `sudo apt install fortune cowsay`

### Fildelning
 - windows fr책n linux
 - linux fr책n windows
 
### Vad jag anv채nder
 - git
 - nodejs
 - dotnet core
 - docker setup against windows
 - shared .ssh / .gitconfig
 - vs code remote (azure dev spaces)

### Docker setup

**Expose daemon from windows without TLS**
![image](https://user-images.githubusercontent.com/658586/69155969-fce56480-0ae2-11ea-80de-a94240cc1916.png)

**Install Docker and Docker Compose within WSL**
```sh# Update the apt package list.
sudo apt-get update -y

# Install Docker's package dependencies.
sudo apt-get install -y \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common

# Download and add Docker's official public PGP key.
curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -

# Verify the fingerprint.
sudo apt-key fingerprint 0EBFCD88

# Add the `stable` channel's Docker upstream repository.
#
# If you want to live on the edge, you can change "stable" below to "test" or
# "nightly". I highly recommend sticking with stable!
sudo add-apt-repository \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"

# Update the apt package list (for the new apt repo).
sudo apt-get update -y

# Install the latest version of Docker CE.
sudo apt-get install -y docker-ce

# Allow your user to access the Docker CLI without needing root access.
sudo usermod -aG docker $USER
```

### WSL 2
 - filesystem changes
 - linux kernel shipped with windows
 - native docker etc
 - 
 
### Links
 - https://www.kodemaker.no/blogg/2019-10-jeg-velger-windows-10/
 - https://aka.ms/cliblog
 - https://aka.ms/learnwsl
 - https://aka.ms/wsldocs


![what is wsl2](https://user-images.githubusercontent.com/658586/69071306-f8a94080-0a29-11ea-8c49-3499b85c0436.png)

![file system performance](https://user-images.githubusercontent.com/658586/69071355-0b237a00-0a2a-11ea-922b-f3cd71b8bcc6.png)

![system call compat](https://user-images.githubusercontent.com/658586/69071448-35753780-0a2a-11ea-95a5-ffe3cb09a4fe.png)
